# SecureConnect

# آموزش مفاهیم webrtc
اولین جز که به آن می پردازیم signaling server است.
در واقع signaling server ربطی به webrtc ندارد و جریی از آن به حساب نمی آید بلکه تنها فراهم کننده و کمک کننده است که دیتای مورد نیاز اولیه برای برقراری و پایداری ارتباط منتقل شود. برای signaling می توانیم از هر چیزی استفاده کنیم. ماثلا webSocket یا XMLHttpRequest.

 کار STUN server این است که اطلاعات مربوط به اینترنت و مسیر اتصال ما به اینترنت و جزییات مربوط به NAT و ... را به ما بر میگرداند. قبل از برقراری ارتباط با طرف مقابل باید از STUN server این اطلاعات را بگیریم و سپس این اطلاعات را می توانیم با signaling server به طرف مقابل بدهیم.
البته در اکثر مواقع STUN کار نخواهد کرد و باید از TURN استفاده کنیم.

در واقع از TURN زمانی استفاده می کنیم که STUN با مشکل مواجه شود. TURN سرورها معمولا رایگان نیستند و علت آن هزینه زیادی است که به علت عبور ترافیک از آنها باید پرداخت شود. در واقع اگر ارتباط P2P نتواند برقرار شود ترافیک از طریق TURN سرور تبادل می شود.

همانطور که می دانیم برای برقراری ارتباط بین دو کلاینت به انتقال اولیه بعضی داده ها داریم. یکی از آنها SDP می باشد. (Session description protocol) در واقع شامل داده هایی می باشد که دو طرف باید از نوع مدیا هم دیگر بدانند تا بتوانند ارتباط درستی داشته باشند. SDP از طریق signaling server منتقل می شود. بعد از SDP دیتای بعدی که باید منتقل شود ICE Candidate می باشد که در واقع اطلاعات مربوط به اینترنت می باشد که از STUN گرفته می شود.


اولین قدم برای شروع ارسال webrtc offer می باشد که در واقع شامل SDP درخواست دهنده می باشد بعد از آن جوابی که طرف مقابل باید بدهد شامل SDP خودش می باشد که بهش webrtc response می گویند. و در نهایت تماس برقرار می شود.

![image](https://github.com/user-attachments/assets/1cd1f223-0142-4500-a9d7-70e28604273c)

و اما همانطور که گفتیم بعضی مواقع ممکن است این ارتباط برقرار نشود به همین دلیل از TURN استفاده می کنیم.

![image](https://github.com/user-attachments/assets/476ba4be-7d7e-470e-abea-13b35c3a7200)



```
openssl req -x509 -nodes -days 365 -newkey rsa:2048 \
    -keyout server.key \
    -out server.crt
```

```
sudo mkdir /etc/ssl/self-signed
sudo mv server.key /etc/ssl/self-signed/
sudo mv server.crt /etc/ssl/self-signed/
```
